---
layout: post
title:  SSH和iPad
date:   2026-02-24 15:49:00 +0800
categories: [记录]
---

## 新的iPad

我的牢弟说我是苹果公司的小黑子，我不这么认为。虽然我自从吃了小米11青春版的亏之后，所使用的产品确实基本都是华为，而且对苹果的刻意阉割打造产品差异的做法十分不齿，对该公司常年挤牙膏而不重视中国区用户意见的态度也颇为不满，但是不得不承认的是，作为从4s时代走来的老用户，我对苹方的产品力还是相对了解的。这家公司在一些方面很有独到之处，我不怎么喜欢苹果，只不过那些东西不太符合我的需求罢了。

但是一旦他们的产品符合我的需求，苹果的魅力就显现出来了。虽然他们的产品没有快充、没有高刷、没有NFC、没有统一的侧拉返回逻辑、没有高度的本土化适配、没有快速的更新迭代，但只要价格到位，这一切都好说——如果一台13英寸、M2芯片、两年前出产、电池满健康度的iPad Air只需2500元就能到手，那它的一系列缺点都是可以忽略的，要知道这个价格甚至比华为的air系列还要便宜，但其芯片的性能几乎是后者的三倍了。

当然，既然要买东西，当然就要考虑需求，需求是什么呢？一个自然是日益旺盛的、使用便携设备打游戏——尤其是米家游戏的需求，另一个就是便携办公、剪辑的需求了。这时候可能就有人要问了：那为什么不去买Mac呢？好问题，这一方面是因为我的笔记本电脑尚且健在，我并不需要多一台电脑，另一方面是因为Mac的价格可比ipad高多了，同样是M2运存8G的MacBook Air，上转转找个参考，随便就是四千多，让我直呼只恨财力不足。另一方面，8G+M2的iPad Air依旧属于移动端产品，这种性能可以说是相当强大了。但是8G+M2的MacBook Air作为电脑，只能算是路边一条的水平，比起我当前的电脑，除了CPU、颜值、续航和屏幕之外，基本都是倒退的，那自然毫无必要。

然而东西到手之后，我就发现，苹果那令人不齿的尿性是渗透到方方面面的。iPad这么一个主打生产力的平板，想要取代“你的下一台电脑”的东西，想用来搞点正经的编程却是困难重重。store里面的达芬奇固然是不错的，屏幕色彩固然是很好的，美区id配美版机子固然是很国际化的，但如果只能搞点花拳绣腿的玩意儿，那我岂不是陷入了买前生产力，买后bilibili的尴尬状态？

这可不行，新iPad必须派上用场，所以我想到了一个十分巧妙的方法：内网穿透加SSH。

## SSH

首先想到的方案是使用华为赠送的云主机，那个玩意儿我记得是Ubuntu，但是华为云主机的一大问题是，这玩意儿属于VPC，具体来说，就是我无法直接通过SSH连接到这台机器上。

既然这条路走不通，那就只能另寻出路了。我在学校也用着一台台式机，这台台式机常年连接宿舍的网络，但台式的特点注定了它无法被带到其他地方。这台台式机可以利用起来，如果我使用内网穿透将其暴露到公网，这就相当于一台云主机，接下来再通过ssh连接这台台式机，我就可以使用iPad远程使用这台高性能的windows电脑了。

为了实现这一点，我首先在自己的笔记本电脑上尝试一下这套方法，如果能跑通的话，到时候移植到台式机上应该也挺方便的。

具体来说，步骤可以分为三个部分，首先是在Windows上开启SSH服务，然后是设置内网穿透，最后是从iPad上连接这台电脑。

### 开启SSH服务

Windows 10内置了OpenSSH服务器功能，所以我不需要安装第三方软件。需要做的只不过是到搜索界面搜索可选功能，然后点击添加，搜索OpenSSH，然后添加即可。

接下来就需要等待它添加完成，这个过程还是比较漫长的。所以我打开了Spotify放了点音乐。顺带一提，Spotify是个好东西，音质之类的我听不出来，但是这个软件的很多歌曲不需要充值会员才能听，即便没有会员，也只不过就是看看广告，不至于听不了歌。

只有这个方面的话，我其实也不会太推崇Spotify，但是QQ音乐等国内厂商往软件里塞了太多无关的功能，即便在苹果这边厂商的强力监督之下，QQ音乐依然敢上来就圈走1GB的空间，这实在是让我难以接受。相较而言，Spotify的体积不到Q音的四分之一。如果我日后用起来感觉不错的话，我可以逐步转换平台了。

看了一眼，SSH服务现在才添加到60%左右。那我继续记录一点东西。今天下午的时候，本来小代说要一块出去玩，然而那会儿我在整SSH有关的东西。等我做完，小代已经坐在书房里开始玩躲猫猫了。于是下午的出行计划很快就被取消，现在是晚上九点多，我们依然待在家中。

应该说这次过来这里，我是有很多计划的，不过都因为种种原因没能实现。后天我就要走了，老实说我和小代在一起的时候很舒服，而且很幸福。如果离开了，我想来会非常不舍，而且感到难过。但实话说，在小代家这段时间，要说我过得多么满足，也不见得。我常常有一种空虚感，而且对自己的生活感到失去了掌控。这是因为我控制欲太强，还是执行力太弱？

不管怎么说，在云南的这段时间要结束了。小代下个学期要考公了，我不知道她在校的作息习惯是否和在家相同，如果相同的话，那我对她的考试前途感到一丝担忧。

### 启动SSH服务

好了，OpenSSH已经添加完成了。下一步就是启动SSH服务了，这一步需要我在命令提示符中进行，命令如下：

```cmd

# 启动 sshd 服务
Start-Service sshd

# 设置服务自动启动
Set-Service -Name sshd -StartupType 'Automatic'

# 确认防火墙规则已添加（默认会自动添加，允许 TCP 22 端口）
New-NetFirewallRule -DisplayName 'OpenSSH Server (sshd)' -Direction Inbound -Protocol TCP -LocalPort 22 -Action Allow

```

说起来，我以前还不知道如何在md格式下插入代码块，刚刚需要打入这段文字的时候去查了查，需要用三个反引号包裹代码部分，前面的三个反引号同一行后面接上语言名字，比如我这里是命令提示行，那就写cmd，回车之后再输入代码。

前面三个代码需要以管理员身份运行，否则会报错。

输完第三个代码之后，我在主机上使用“ssh 用户名@localhost”这条代码测试本地ssh连接，然后跳出了以下提示：

```cmd
PS C:\Users\Thinkpad> ssh ThinkPad@localhost
The authenticity of host 'localhost (::1)' can't be established.
ED25519 key fingerprint is SHA256:kj4+l7/1xi9dmACIf20BUPWdXbL1oUMdXx6ughQmDvk.
This key is not known by any other names.
Are you sure you want to continue connecting (yes/no/[fingerprint])?
```

询问AI得知，这是SSH 通过主机密钥来确保你连接到的服务器是真实的，而不是中间人伪造的。当我第一次连接到一个新的 SSH 服务器（这里是我自己的 Windows 机器）时，客户端会显示该服务器的公钥指纹，并询问我是否信任它。

我输入yes后，显示了如下内容：

```cmd
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added 'localhost' (ED25519) to the list of known hosts.
Connection reset by ::1 port 22
```

这就是报错了，于是我换了一种办法，使用另一条指令来接入：

```cmd
ssh ThinkPad@127.0.0.1
```

### 虚拟组网

这次接入了，我输入密码之后，就可以直接使用Windows terminal了。接下来需要做的是内网穿透，我需要把我的电脑挂到公网服务器上，但这比较麻烦。于是AI提供了另一种方案，那就是使用Tailscale进行虚拟组网。步骤大概是首先在电脑和iPad上下载安装Tailscale，并登录账号。

我统一使用apple id登录，随后我就看到我的电脑和平板各被分配了一个IP地址，我分配到的电脑IP地址是（此处注释掉了，保密嘻嘻）<!--100.108.32.94-->，平板分配的地址是（此处也注释掉了，还是保密嘻嘻）<!--100.80.67.44-->。

接下来，只需要在iPad上打开Termius，然后在Creat Host界面输入刚才的IP地址，就可以连接到我的电脑了。

我很快就做完了这些，它给了一个好像是错误提示的东西，但是我依然连接上了我的电脑。那么那些报错就不管了吧，只要系统能跑就行。

### 连接条件

不过系统能跑的条件我还是要看看的，具体来说，包括三个方面的条件，首先是Tailscale网络层面的条件，其次是Windows主机设置，最后是iPad的连接认证信息设置。

具体来说，首先两台设备得都登录上Tailscale，使用同一个账号登录，并且均显示为已连接。客户端必须正常运行，系统中必须已经分配虚拟IP地址。

主机配置方面，SSH服务必须启动且正在监听，防火墙必须容许SSH联系，且SSH允许用户登录。

最后是认证信息，用户名和密码必须完全一致。

不过这依然带来了一个问题，iPad OS系统上不允许两个VPN同时使用，所以在使用Tailscale的时候，我无法继续使用小火箭翻墙，只能访问国内的AI了，这有一点点不方便，不过还好，毕竟DS现在的能力也是够用的了。

### 测试

最后我进行了测试，电脑连接小代家的一楼WIFI，而平板连接我的手机热点，然后我使用Termius连接到我的电脑。访问一切正常，本次的技术目的取得圆满成功。至此我总算可以说，我的iPad具有编程方面的生产力了。

虽然我无法完全掌控生活中的离别和未来的方向，但至少，我现在能用手中的iPad，随时掌控千里之外电脑的屏幕和代码。